<div class="step" metal:define-macro="step" tal:define="
  href context/absolute_url;
  id context/id;
  title context/Title;
  text context/getText;
  text_preview_max_chars python:27;
  text_preview context/getRawText;
  textIslongerThanMax python: len(text_preview) > text_preview_max_chars;
  isRootStepbystep nocall: context/adi_stepbysteps_main_view/isRootStepbystep;
  nrs nocall: context/adi_stepbysteps_main_view/getStepbystepPosNrs;
  hasChildren context/adi_stepbysteps_main_view/hasChildren;
  state python:context.portal_workflow.getInfoFor(context, 'review_state');
  state_class string:state-${state};
  ">
  <div metal:use-macro="context/step_blockers/macros/blockers">
Blocker
  </div>
  <div metal:use-macro="context/step_head/macros/head">
Head
  </div>
  <div metal:use-macro="context/step_header/macros/header">
Header
  </div>
</div>
