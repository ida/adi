<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">
<head>
<link rel="stylesheet" href="
steps_colors.css
">
<link rel="stylesheet" href="
steps_main.css
">
<link rel="stylesheet" href="steps_main.css">
<script src="++resource++plone.app.jquery.js"></script>
<script src="steps_main.js"></script>
</head>
    <div id="content" tal:define=" href context/absolute_url;
      children context/getFolderContents;
      hasChildren python: len(children) > 0;
      owner context/getOwner;
      state context/plone_context_state/workflow_state;
      text context/getText|nothing;
      trans_comment_url string:${href}/content_status_comment?workflow_action=;
      trans_url string:${href}/content_status_modify?workflow_action=;
      isTopStep string:isTopStep;">
      <div metal:use-macro="context/global_statusmessage/macros/portal_message">
Info message
      </div>
      <div metal:use-macro="context/steps_header/macros/steps_header">
Steps-header
      </div>
      <metal:item use-macro="context/step_main/macros/step">
This step
      </metal:item>
      <div id="text" class="text" tal:content="structure text">
Text
      </div>
      <div id="content-core" class="body">
        <div class="children" tal:condition="hasChildren">
          <tal:loop tal:repeat="child children">
            <tal:child tal:define="context python:child.getObject();
                                   isTopStep nothing;">
<tal:tempfordev tal:condition="python: context.portal_type == 'Stepbystep'">
              <metal:item use-macro="context/step_main/macros/step">
Child step
              </metal:item>
</tal:tempfordev>
            </tal:child>
          </tal:loop>
          <div class="files">
          <tal:loop tal:repeat="child children">
            <tal:child tal:define="context python:child.getObject();
      owner context/getOwner;
                                   isTopStep nothing;">
<tal:tempfordev tal:condition="python: context.portal_type != 'Stepbystep' and context.portal_type != 'Topic'">
File:
              <metal:item use-macro="context/step_main/macros/step">
Child step
              </metal:item>
</tal:tempfordev>
            </tal:child>
          </tal:loop>
          </div>
        </div>
      </div>
      <metal:item use-macro="context/controls/macros/controls">
Controls
      </metal:item>
    </div>
</html>
